services:
  unraid-mcp:
    image: jamesprial/unraid-mcp:latest
    container_name: unraid-mcp
    ports:
      - "8080:8080"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - /var/run/libvirt/libvirt-sock:/var/run/libvirt/libvirt-sock
      - /var/local/emhttp:/host/emhttp:ro
      - /proc:/host/proc:ro
      - /sys:/host/sys:ro
      - /mnt/user/appdata/unraid-mcp:/config
    environment:
      - UNRAID_MCP_AUTH_TOKEN=${UNRAID_MCP_AUTH_TOKEN:-}
      - UNRAID_GRAPHQL_API_KEY=${UNRAID_GRAPHQL_API_KEY:-}
    extra_hosts:
      - "host.docker.internal:host-gateway"
    group_add:
      - "0"
    deploy:
      resources:
        limits:
          memory: 256M
          cpus: "0.50"
    logging:
      driver: json-file
      options:
        max-size: "10m"
        max-file: "3"
    restart: unless-stopped
